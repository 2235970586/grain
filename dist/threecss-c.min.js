function Global(){}function Notification(){this.SEND_HTTP_START="SEND_HTTP_START",this.SEND_HTTP_END="SEND_HTTP_END",this.SYSTEM_ERROR="SYSTEM_ERROR",this.MODULE_INIT_COMPLETE="moduleInitComplete"}function ViewManager(){this.observerMap=[],this.viewMap=[],this.registerObserver=function(t,e){if(null!=t&&null!=e){var i=this.observerMap[t];if(i){for(var s=!1,n=0;n<i.length;n++)if(i[n]==e){s=!0;break}s?alert("重复注册消息监听,请检查逻辑"):i.push(e)}else this.observerMap[t]=[e]}else alert("注册消息或控制器为空，请检查")},this.registerObserverArray=function(t,e){for(var i=0;i<t.length;i++)this.registerObserver(t[i],e)},this.getNotification=function(t,e){var i={};return i.name=t,i.body=e,i},this.notifyObservers=function(t){var e=this.observerMap[t.name];if(e)for(var i=e.concat(),s=0;s<i.length;s++){var n=i[s];n.handleNotification.call(n,[t])}},this.removeObserverArray=function(t,e){for(var i=0;i<t.length;i++)this.removeObserver(t[i],e)},this.removeObserver=function(t,e){if(null!=t){for(var i=this.observerMap[t],s=!1,n=0;n<i.length;n++)if(i[n]==e){i.splice(n,1),s=!0;break}s||alert("移除消息监听失败，请检查逻辑"),0==i.length&&delete this.observerMap[t]}},this.registerView=function(t,e){this.viewMap[t]=e},this.retrieveView=function(t){return this.viewMap[t]},this.removeView=function(t){var e=this.viewMap[t];return null!=e&&delete this.viewMap[t],e},this.reset=function(){this.observerMap=[],this.viewMap=[]}}function HttpConfigNormal(){this.TYPE_POST="post",this.TYPE_GET="get",this.RETURN_TYPE_JSON="json",this.RETURN_TYPE_HTML="html",this.PACKET="packet"}function HttpConfig(){HttpConfigNormal.apply(this),this.HOPCODE="hOpCode",this.TOKEN="token",this.SEND_TYPE="sendType",this.RECEIVE_TYPE="receiveType",this.FILE_UUID="fileUuid",this.SEND_TYPE_JSON="sendTypeJson",this.SEND_TYPE_PROTOBUF="sendTypeProtobuf",this.SEND_TYPE_PACKET="sendTypePacket",this.SEND_TYPE_FILE_SAVE_SESSION="sendTypeFileSaveSession",this.SEND_TYPE_FILE_NOT_SAVE="sendTypeFileNotSave",this.SEND_TYPE_NONE="sendTypeNone",this.RECEIVE_TYPE_JSON="receiveTypeJson",this.RECEIVE_TYPE_PROTOBUF="receiveTypeProtobuf",this.RECEIVE_TYPE_FILE="receiveTypeFile",this.RECEIVE_TYPE_IMAGE="receiveTypeImage",this.RECEIVCE_TYPE_STRING="receiveTypeString",this.RECEIVE_TYPE_NONE="receiveTypeNone"}function HttpResultFilter(){this.filterArray=new Array,this.addFilter=function(t){this.filterArray.push(t)},this.filter=function(t,e){for(var i=0;i<this.filterArray.length;i++)if(!this.filterArray[i].filter(t,e))return!1;return!0}}function SendParamNormal(){this.canContinuous=!1,this.lockKey,this.loadType,this.successHandle,this.failHandle,this.object,this.data,this.type=$T.httpConfig.TYPE_POST,this.async=!0,this.url,this.returnType=$T.httpConfig.RETURN_TYPE_JSON,this.isStatic=!1,this.startTime,this.endTime,this.fileArray,this.headerKey,this.headerValue}function SendParam(){SendParamNormal.apply(this),this.fileUuid,this.token,this.sendType,this.receiveType}function TestFilter(){this.filter=function(t,e){return!0}}function ArrayTools(){this.indexOf=function(t,e){var i=-1;if(null==t||null==e)return i;for(var s=0;s<t.length;s++)if(t[s]==e){i=s;break}return i}}function DisplayObject(){this.obj,this.xValue=0,this.yValue=0,this.alphaValue=0,this.visibility="visible",this.DisplayObject=function(t){this.obj=t},this.getX=function(){return this.xValue},this.setX=function(t){this.xValue=t,this.draw()},this.getY=function(){return this.yValue},this.setY=function(t){this.yValue=t,this.draw()},this.getAlpha=function(){return this.alphaValue},this.setAlpha=function(t){this.alphaValue=t,this.draw()},this.setVisible=function(t){this.visibility=1==t?"visible":"hidden",this.draw()},this.draw=function(){this.obj.style.position="absolute",this.obj.style.top=this.yValue+"px",this.obj.style.left=this.xValue+"px",this.obj.style.opacity=this.alphaValue,this.obj.style.filter="alpha(opacity="+100*this.alphaValue+"%)",this.obj.style.visibility=this.visibility}}function Event(){this.mTarget,this.mCurrentTarget,this.mType,this.mBubbles,this.mStopsPropagation,this.mStopsImmediatePropagation,this.mData,this.Event=function(t,e,i){void 0==e&&(e=!1),void 0==i&&(i=null),this.reset(t,e,i)},this.stopPropagation=function(){this.mStopsPropagation=!0},this.stopImmediatePropagation=function(){this.mStopsPropagation=this.mStopsImmediatePropagation=!0},this.dispose=function(){this.mData=this.mTarget=this.mCurrentTarget=null},this.reset=function(t,e,i){return void 0==e&&(e=!1),void 0==i&&(i=null),this.mType=t,this.mBubbles=e,this.mData=i,this.mTarget=this.mCurrentTarget=null,this.mStopsPropagation=this.mStopsImmediatePropagation=!1,this}}function EventPool(){this.sEventPool=new Array,this.fromPool=function(t,e,i){if(this.sEventPool.length)return this.sEventPool.pop().reset(t,e,i);var s=new Event;return s.Event(t,e,i),s},this.toPool=function(t){t.mData=t.mTarget=t.mCurrentTarget=null,this.sEventPool[this.sEventPool.length]=t}}function EventDispatcher(){this.mEventListeners,this.isEventDispatcher=!0,this.addEventListener=function(t,e,i){null==this.mEventListeners&&(this.mEventListeners=new Array);var s=this.mEventListeners[t];null==s?(this.mEventListeners[t]=[e],$T.functionMapping[e]=i):-1==$T.arrayTools.indexOf(s,e)&&(s.push(e),$T.functionMapping[e]=i)},this.removeEventListener=function(t,e){if(this.mEventListeners){var i=this.mEventListeners[t],s=i?i.length:0;if(s>0){for(var n=0,r=new Array,a=0;a<s;++a){var o=i[a];o!=e&&(r[n++]=o)}this.mEventListeners[t]=r}}},this.removeEventListeners=function(t){t&&this.mEventListeners?delete this.mEventListeners[t]:this.mEventListeners=null},this.dispatchEvent=function(t){var e=t.mBubbles;if(e||null!=this.mEventListeners&&t.mType in this.mEventListeners){var i=t.mTarget;t.mTarget=this,e&&this.isDisplayObject?this.bubbleEvent(t):this.invokeEvent(t),i&&(t.mTarget=i)}},this.invokeEvent=function(t){var e=this.mEventListeners?this.mEventListeners[t.mType]:null,i=null==e?0:e.length;if(i){t.mCurrentTarget=this;for(var s=0;s<i;++s){var n=e[s],r=n.length;if(0==r?n.call($T.functionMapping[n]):1==r?n.call($T.functionMapping[n],t):n.call($T.functionMapping[n],t,t.mData),t.mStopsImmediatePropagation)return this.mEventListeners&&e===this.mEventListeners[t.mType]||(e.length=0),!0}return this.mEventListeners&&e===this.mEventListeners[t.mType]||(e.length=0),t.mStopsPropagation}return!1},this.bubbleEvent=function(t){var e,i=this,s=1;for($T.sBubbleChains.length>0?(e=$T.sBubbleChains.pop())[0]=i:e=[i];null!=(i=i.parent);)e[s++]=i;for(var n=0;n<s&&!e[n].invokeEvent(t);++n);e.length=0,$T.sBubbleChains.push(e)},this.dispatchEventWith=function(t,e,i){if(void 0==e&&(e=!1),void 0==i&&(i=null),e||this.hasEventListener(t)){var s=$T.eventPool.fromPool(t,e,i);this.dispatchEvent(s),$T.eventPool.toPool(s)}},this.hasEventListener=function(t){var e=this.mEventListeners?this.mEventListeners[t]:null;return!!e&&0!=e.length}}function TweenEventType(){this.REMOVE_FROM_JUGGLER="removeFromJuggler"}function DelayedCall(){this.mCurrentTime,this.mTotalTime,this.mCall,this.mArgs,this.mRepeatCount,this.isPoolDelayedCall=!1,this.isDelayedCall=!0,this.DelayedCall=function(t,e,i,s){void 0==i&&(i=null),void 0==s&&(s=!1),this.reset(t,e,i,s)},this.reset=function(t,e,i,s){return void 0==i&&(i=null),void 0==s&&(s=!1),this.isPoolDelayedCall=s,this.mCurrentTime=0,this.mTotalTime=Math.max(e,1e-4),this.mCall=t,this.mArgs=i,this.mRepeatCount=1,EventDispatcher.apply(this),this},this.advanceTime=function(t){var e=this.mCurrentTime;if(this.mCurrentTime=Math.min(this.mTotalTime,this.mCurrentTime+t),e<this.mTotalTime&&this.mCurrentTime==this.mTotalTime)if(0==this.mRepeatCount||this.mRepeatCount>1)this.mRepeatCount>0&&(this.mRepeatCount-=1),this.mCurrentTime=0,null==this.mArgs?this.mCall.apply(this):this.mCall.apply(this,this.mArgs),this.advanceTime(e+t-this.mTotalTime);else{var i=this.mCall,s=this.mArgs;this.dispatchEventWith($T.tweenEventType.REMOVE_FROM_JUGGLER),i.apply(this,s)}},this.dispose=function(){this.mCall=null,this.mArgs=null},this.isComplete=function(){return 1==this.mRepeatCount&&this.mCurrentTime==this.mTotalTime}}function DelayedCallPool(){this.sDelayedCallPool=new Array,this.fromPool=function(t,e,i){if(void 0==i&&(i=null),this.sDelayedCallPool.length)return this.sDelayedCallPool.pop().reset(t,e,i,!0);var s=new DelayedCall;return s.DelayedCall(t,e,i,!0),s},this.toPool=function(t){t.mCall=null,t.mArgs=null,this.sDelayedCallPool[this.sDelayedCallPool.length]=t}}function Transitions(){this.LINEAR="linear",this.EASE_IN="easeIn",this.EASE_OUT="easeOut",this.EASE_IN_OUT="easeInOut",this.EASE_OUT_IN="easeOutIn",this.EASE_IN_BACK="easeInBack",this.EASE_OUT_BACK="easeOutBack",this.EASE_IN_OUT_BACK="easeInOutBack",this.EASE_OUT_IN_BACK="easeOutInBack",this.EASE_IN_ELASTIC="easeInElastic",this.EASE_OUT_ELASTIC="easeOutElastic",this.EASE_IN_OUT_ELASTIC="easeInOutElastic",this.EASE_OUT_IN_ELASTIC="easeOutInElastic",this.EASE_IN_BOUNCE="easeInBounce",this.EASE_OUT_BOUNCE="easeOutBounce",this.EASE_IN_OUT_BOUNCE="easeInOutBounce",this.EASE_OUT_IN_BOUNCE="easeOutInBounce",this.sTransitions=null,this.getTransition=function(t){return null==this.sTransitions&&this.registerDefaults(),this.sTransitions[t]},this.register=function(t,e){null==this.sTransitions&&this.registerDefaults(),this.sTransitions[t]=e},this.registerDefaults=function(){this.sTransitions=new Array,this.register(this.LINEAR,this.linear),this.register(this.EASE_IN,this.easeIn),this.register(this.EASE_OUT,this.easeOut),this.register(this.EASE_IN_OUT,this.easeInOut),this.register(this.EASE_OUT_IN,this.easeOutIn),this.register(this.EASE_IN_BACK,this.easeInBack),this.register(this.EASE_OUT_BACK,this.easeOutBack),this.register(this.EASE_IN_OUT_BACK,this.easeInOutBack),this.register(this.EASE_OUT_IN_BACK,this.easeOutInBack),this.register(this.EASE_IN_ELASTIC,this.easeInElastic),this.register(this.EASE_OUT_ELASTIC,this.easeOutElastic),this.register(this.EASE_IN_OUT_ELASTIC,this.easeInOutElastic),this.register(this.EASE_OUT_IN_ELASTIC,this.easeOutInElastic),this.register(this.EASE_IN_BOUNCE,this.easeInBounce),this.register(this.EASE_OUT_BOUNCE,this.easeOutBounce),this.register(this.EASE_IN_OUT_BOUNCE,this.easeInOutBounce),this.register(this.EASE_OUT_IN_BOUNCE,this.easeOutInBounce)},this.linear=function(t){return t},this.easeIn=function(t){return t*t*t},this.easeOut=function(t){var e=t-1;return e*e*e+1},this.easeInOut=function(t){return this.easeCombined(this.easeIn,this.easeOut,t)},this.easeOutIn=function(t){return this.easeCombined(this.easeOut,this.easeIn,t)},this.easeInBack=function(t){var e=1.70158;return Math.pow(t,2)*((e+1)*t-e)},this.easeOutBack=function(t){var e=t-1,i=1.70158;return Math.pow(e,2)*((i+1)*e+i)+1},this.easeInOutBack=function(t){return this.easeCombined(this.easeInBack,this.easeOutBack,t)},this.easeOutInBack=function(t){return this.easeCombined(this.easeOutBack,this.easeInBack,t)},this.easeInElastic=function(t){if(0==t||1==t)return t;var e=t-1;return-1*Math.pow(2,10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)},this.easeOutElastic=function(t){if(0==t||1==t)return t;return Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},this.easeInOutElastic=function(t){return this.easeCombined(this.easeInElastic,this.easeOutElastic,t)},this.easeOutInElastic=function(t){return this.easeCombined(this.easeOutElastic,this.easeInElastic,t)},this.easeInBounce=function(t){return 1-this.easeOutBounce(1-t)},this.easeOutBounce=function(t){var e,i=7.5625,s=2.75;return t<1/s?e=i*Math.pow(t,2):t<2/s?(t-=1.5/s,e=i*Math.pow(t,2)+.75):t<2.5/s?(t-=2.25/s,e=i*Math.pow(t,2)+.9375):(t-=2.625/s,e=i*Math.pow(t,2)+.984375),e},this.easeInOutBounce=function(t){return this.easeCombined(this.easeInBounce,this.easeOutBounce,t)},this.easeOutInBounce=function(t){return this.easeCombined(this.easeOutBounce,this.easeInBounce,t)},this.easeCombined=function(t,e,i){return i<.5?.5*t.call($T.transitions,2*i):.5*e.call($T.transitions,2*(i-.5))+.5}}function Tween(){this.mTarget,this.mTransitionFunc,this.mTransitionName,this.mProperties,this.mStartValues,this.mEndValues,this.mOnStart,this.mOnUpdate,this.mOnRepeat,this.mOnComplete,this.mOnStartArgs,this.mOnUpdateArgs,this.mOnRepeatArgs,this.mOnCompleteArgs,this.mTotalTime,this.mCurrentTime,this.mProgress,this.mDelay,this.mRoundToInt,this.mNextTween,this.mRepeatCount,this.mRepeatDelay,this.mReverse,this.mCurrentCycle,this.isPoolTween=!1,this.isTween=!0,this.Tween=function(t,e,i,s){void 0==i&&(i="linear"),void 0==s&&(s=!1),this.reset(t,e,i,s)},this.reset=function(t,e,i,s){return void 0==i&&(i="linear"),void 0==s&&(s=!1),this.isPoolTween=s,this.mTarget=t,this.mCurrentTime=0,this.mTotalTime=Math.max(1e-4,e),this.mProgress=0,this.mDelay=this.mRepeatDelay=0,this.mOnStart=this.mOnUpdate=this.mOnRepeat=this.mOnComplete=null,this.mOnStartArgs=this.mOnUpdateArgs=this.mOnRepeatArgs=this.mOnCompleteArgs=null,this.mNextTween=null,this.mRoundToInt=this.mReverse=!1,this.mRepeatCount=1,this.mCurrentCycle=-1,this.setTransition(i),this.mProperties?this.mProperties.length=0:this.mProperties=new Array,this.mStartValues?this.mStartValues.length=0:this.mStartValues=new Array,this.mEndValues?this.mEndValues.length=0:this.mEndValues=new Array,EventDispatcher.apply(this),this},this.animate=function(t,e,i){null!=this.mTarget&&(this.mProperties[this.mProperties.length]=e,this.mStartValues[this.mStartValues.length]=t.call(this.mTarget),this.mEndValues[this.mEndValues.length]=i)},this.advanceTime=function(t){if(0!=t&&(1!=this.mRepeatCount||this.mCurrentTime!=this.mTotalTime)){var e,i=this.mCurrentTime,s=this.mTotalTime-this.mCurrentTime,n=t>s?t-s:0;if(this.mCurrentTime+=t,!(this.mCurrentTime<=0)){this.mCurrentTime>this.mTotalTime&&(this.mCurrentTime=this.mTotalTime),this.mCurrentCycle<0&&i<=0&&(this.mCurrentCycle++,null!=this.mOnStart&&this.mOnStart.call(this,this.mOnStartArgs));var r=this.mCurrentTime/this.mTotalTime,a=this.mReverse&&this.mCurrentCycle%2==1,o=this.mStartValues.length;for(this.mProgress=a?this.mTransitionFunc.call($T.transitions,1-r):this.mTransitionFunc.call($T.transitions,r),e=0;e<o;++e){var h=this.mStartValues[e],l=this.mEndValues[e]-h,u=h+this.mProgress*l;this.mRoundToInt&&(u=Math.round(u)),this.mProperties[e].call(this.mTarget,u)}if(null!=this.mOnUpdate&&this.mOnUpdate.call(this,this.mOnUpdateArgs),i<this.mTotalTime&&this.mCurrentTime==this.mTotalTime)if(0==this.mRepeatCount||this.mRepeatCount>1)this.mCurrentTime=-this.mRepeatDelay,this.mCurrentCycle++,this.mRepeatCount>1&&this.mRepeatCount--,null!=this.mOnRepeat&&this.mOnRepeat.call(this,this.mOnRepeatArgs);else{var c=this.mOnComplete,T=this.mOnCompleteArgs;this.dispatchEventWith($T.tweenEventType.REMOVE_FROM_JUGGLER),null!=c&&c.call(this,T)}n&&this.advanceTime(n)}}},this.isComplete=function(){return this.mCurrentTime==this.mTotalTime&&1==this.mRepeatCount},this.setTransition=function(t){this.mTransitionName=t,this.mTransitionFunc=$T.transitions.getTransition(t)},this.setTransitionFunc=function(t){this.mTransitionName="custom",this.mTransitionFunc=t},this.setDelay=function(t){this.mCurrentTime=this.mCurrentTime+this.mDelay-t,this.mDelay=t},this.dispose=function(){this.mOnStart=this.mOnUpdate=this.mOnRepeat=this.mOnComplete=null,this.mOnStartArgs=this.mOnUpdateArgs=this.mOnRepeatArgs=this.mOnCompleteArgs=null,this.mTarget=null,this.mTransitionFunc=null,this.mProperties.length=0,this.mStartValues.length=0,this.mEndValues.length=0,this.mNextTween=null}}function TweenPool(){this.sTweenPool=new Array,this.fromPool=function(t,e,i){if(void 0==i&&(i="linear"),this.sTweenPool.length)return this.sTweenPool.pop().reset(t,e,i,!0);var s=new Tween;return s.Tween(t,e,i,!0),s},this.toPool=function(t){t.mOnStart=t.mOnUpdate=t.mOnRepeat=t.mOnComplete=null,t.mOnStartArgs=t.mOnUpdateArgs=t.mOnRepeatArgs=t.mOnCompleteArgs=null,t.mTarget=null,t.mTransitionFunc=null,t.mNextTween=null,this.sTweenPool[this.sTweenPool.length]=t}}function Juggler(){this.mObjects,this.mElapsedTime,this.Juggler=function(){this.mElapsedTime=0,this.mObjects=new Array},this.add=function(t){t&&-1==$T.arrayTools.indexOf(this.mObjects,t)&&(this.mObjects[this.mObjects.length]=t,t.isEventDispatcher&&t.addEventListener($T.tweenEventType.REMOVE_FROM_JUGGLER,this.onRemove,this))},this.contains=function(t){return-1!=$T.arrayTools.indexOf(this.mObjects,t)},this.remove=function(t,e){if(null!=t){t.isEventDispatcher&&t.removeEventListener($T.tweenEventType.REMOVE_FROM_JUGGLER,this.onRemove),t.isTween&&null==e&&t.isPoolTween&&this.onPooledTweenComplete(t),t.isDelayedCall&&null==e&&t.isPoolDelayedCall&&this.onPooledDelayedCallComplete(t);var i=$T.arrayTools.indexOf(this.mObjects,t);-1!=i&&(this.mObjects[i]=null)}},this.removeTweens=function(t){if(null!=t)for(var e=this.mObjects.length-1;e>=0;--e){var i=this.mObjects[e];i.isTween&&i.mTarget==t&&(i.removeEventListener($T.tweenEventType.REMOVE_FROM_JUGGLER,this.onRemove),i.isPoolTween&&this.onPooledTweenComplete(i),this.mObjects[e]=null)}},this.containsTweens=function(t){if(null==t)return!1;for(var e=this.mObjects.length-1;e>=0;--e){var i=this.mObjects[e];if(i.isTween&&i.mTarget==t)return!0}return!1},this.delayCall=function(t,e,i){if(void 0==t)return null;var s=$T.delayedCallPool.fromPool(t,e,i);return this.add(s),s},this.repeatCall=function(t,e,i,s){if(void 0==t)return null;void 0==i&&(i=0);var n=$T.delayedCallPool.fromPool(t,e,s);return n.mRepeatCount=i,this.add(n),n},this.onPooledDelayedCallComplete=function(t){$T.delayedCallPool.toPool(t)},this.tween=function(t,e,i){var s=$T.tweenPool.fromPool(t,e);for(var n in i){var r=i[n];s.hasOwnProperty(n)?s[n]=r:t.hasOwnProperty(n)&&s.animate(n,r)}return this.add(s),s},this.onPooledTweenComplete=function(t){$T.tweenPool.toPool(t)},this.advanceTime=function(t){var e,i=this.mObjects.length,s=0;if(this.mElapsedTime+=t,0!=i){for(e=0;e<i;++e){var n=this.mObjects[e];n&&(s!=e&&(this.mObjects[s]=n,this.mObjects[e]=null),n.advanceTime(t),++s)}if(s!=e){for(i=this.mObjects.length;e<i;)this.mObjects[s++]=this.mObjects[e++];this.mObjects.length=s}}},this.onRemove=function(t){this.remove(t.mTarget,t),t.mTarget.isTween&&t.mTarget.isComplete&&this.add(t.mTarget.nextTween),t.mTarget.isTween&&t.mTarget.isPoolTween&&this.onPooledTweenComplete(t.mTarget),t.mTarget.isDelayedCall&&t.mTarget.isPoolDelayedCall&&this.onPooledDelayedCallComplete(t.mTarget)}}function JugglerManager(){this.processTime=0,this.oneJuggler="",this.twoJuggler="",this.threeJuggler="",this.fourJuggler="",this.intervalId="",this.isStop=!1,this.init=function(){this.processTime=(new Date).getTime(),this.oneJuggler=new Juggler,this.oneJuggler.Juggler(),this.twoJuggler=new Juggler,this.twoJuggler.Juggler(),this.threeJuggler=new Juggler,this.threeJuggler.Juggler(),this.fourJuggler=new Juggler,this.fourJuggler.Juggler(),this.intervalId=setInterval(this.onEnterFrame,25)},this.onEnterFrame=function(){var t=(new Date).getTime(),e=(t-$T.jugglerManager.processTime)/1e3;$T.jugglerManager.processTime=t,0==e||this.isStop||($T.jugglerManager.oneJuggler.advanceTime(e),$T.jugglerManager.twoJuggler.advanceTime(e),$T.jugglerManager.threeJuggler.advanceTime(e),$T.jugglerManager.fourJuggler.advanceTime(e))}}function Version(){this.NAME="v1.0.0",this.addVersionToUrl=function(t){return t+=-1==t.indexOf("?")?"?v="+this.NAME:"&v="+this.NAME},this.addVersionAndTimeToUrl=function(t){return t=this.addVersionToUrl(t)+"&t="+(new Date).getTime()},this.loadScript=function(t){document.write("<script src='"+this.addVersionToUrl(t)+"' language='javascript' type='text/javascript'><\/script>")},this.loadCss=function(t){document.write("<link href='"+this.addVersionToUrl(t)+"' rel='stylesheet' type='text/css'/>")},this.initLoad=function(){this.loadScript("js/threecss-c/mvc/Notification.js"),this.loadScript("js/threecss-c/mvc/ViewManager.js"),this.loadScript("js/threecss-c/http/HttpConfigNormal.js"),this.loadScript("js/threecss-c/http/HttpConfig.js"),this.loadScript("js/threecss-c/http/HttpResultFilter.js"),this.loadScript("js/threecss-c/http/SendParamNormal.js"),this.loadScript("js/threecss-c/http/SendParam.js"),this.loadScript("js/threecss-c/http/TestFilter.js"),this.loadScript("js/threecss-c/tools/ArrayTools.js"),this.loadScript("js/threecss-c/display/DisplayObject.js"),this.loadScript("js/threecss-c/event/Event.js"),this.loadScript("js/threecss-c/event/EventPool.js"),this.loadScript("js/threecss-c/event/EventDispatcher.js"),this.loadScript("js/threecss-c/tween/TweenEventType.js"),this.loadScript("js/threecss-c/tween/DelayedCall.js"),this.loadScript("js/threecss-c/tween/DelayedCallPool.js"),this.loadScript("js/threecss-c/tween/Transitions.js"),this.loadScript("js/threecss-c/tween/Tween.js"),this.loadScript("js/threecss-c/tween/TweenPool.js"),this.loadScript("js/threecss-c/tween/Juggler.js"),this.loadScript("js/threecss-c/tween/JugglerManager.js"),this.loadScript("js/threecss-c/http/HttpUtilNormal.js"),this.loadScript("js/threecss-c/http/HttpUtil.js"),this.loadScript("js/threecss-c/resource/ResourceEventType.js"),this.loadScript("js/threecss-c/resource/Loader.js"),this.loadScript("js/threecss-c/resource/ResourceManager.js"),this.loadScript("js/threecss-c/Register.js"),this.loadScript("js/threecss-c/module/ModuleData.js"),this.loadScript("js/threecss-c/module/ModuleManager.js"),this.loadScript("js/threecss-c/websocket/WebSocketConfig.js"),this.loadScript("js/threecss-c/websocket/WebSocketEventType.js"),this.loadScript("js/threecss-c/websocket/WebSocketClient.js")},this.init=function(t){null!=t&&(this.NAME=t),$T.jugglerManager.init()}}function HttpUtilNormal(){this.lockMap=[],this.send=function(t){if(null!=t.url){var e;if(null!=t.fileArray)try{e=new FormData}catch(t){return void alert("浏览器不支持FormData")}if(null!=t.successHandle&&null!=t.object)if(t.type!=$T.httpConfigNormal.TYPE_POST||null!=t.data){if(t.canContinuous||1!=this.lockMap[t.lockKey]){t.canContinuous||null==t.lockKey||(this.lockMap[t.lockKey]=1);var i=new XMLHttpRequest;if(null==i)return t.canContinuous||null==t.lockKey||delete this.lockMap[t.lockKey],void alert("浏览器不支持ajax请求");null!=t.loadType&&$T.viewManager.notifyObservers($T.viewManager.getNotification($T.notification.SEND_HTTP_START,t.loadType));var s;if(s=t.isStatic?$T.version.addVersionToUrl(t.url):$T.version.addVersionAndTimeToUrl(t.url),i.open(t.type,s,t.async),null!=t.headerKey&&t.headerKey.length>0)for(n=0;n<t.headerKey.length;n++)i.setRequestHeader(t.headerKey[n],t.headerValue[n]);if(null!=t.fileArray){for(var n=0;n<t.fileArray.length;n++){var r=t.fileArray[n];e.append("file"+n,r)}e.append($T.httpConfigNormal.PACKET,encodeURI(JSON.stringify(t.data)))}this.addHttpListener(i,this.sendReturn,t),t.startTime=(new Date).getTime(),null!=e?i.send(e):t.type==$T.httpConfigNormal.TYPE_POST?(i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t.data))):i.send()}}else alert("发送post请求，data不能为空");else alert("successHandle或object不能为空")}else alert("url不能为空")},this.addHttpListener=function(t,e,i){var s=e;null!=i&&(s=function(s){e.call(t,s,i)}),t.onreadystatechange=s},this.sendReturn=function(t,e){if(4==this.readyState)if(e.endTime=(new Date).getTime(),e.canContinuous||null==e.lockKey||delete $T.httpUtilNormal.lockMap[e.lockKey],null!=e.loadType&&$T.viewManager.notifyObservers($T.viewManager.getNotification($T.notification.SEND_HTTP_END,e.loadType)),200==this.status){var i;if(e.returnType==$T.httpConfigNormal.RETURN_TYPE_JSON)try{i=JSON.parse(this.responseText)}catch(t){return $T.viewManager.notifyObservers($T.viewManager.getNotification($T.notification.SYSTEM_ERROR,"json eval error")),null!=e.failHandle&&e.failHandle.call(e.object,null,e),void alert("json解析异常")}else e.returnType==$T.httpConfigNormal.RETURN_TYPE_HTML&&(i=this.responseText);$T.httpResultFilter.filter(i,e)?e.successHandle.call(e.object,i,e):null!=e.failHandle&&e.failHandle.call(e.object,i,e)}else $T.viewManager.notifyObservers($T.viewManager.getNotification($T.notification.SYSTEM_ERROR,"http return status"+this.status)),null!=e.failHandle&&e.failHandle.call(e.object,null,e);else 2==this.readyState||this.readyState}}function HttpUtil(){this.send=function(t){null!=t.data?null!=t.data[$T.httpConfig.HOPCODE]?(t.lockKey=t.data[$T.httpConfig.HOPCODE],t.headerKey=[],t.headerValue=[],t.headerKey.push($T.httpConfig.HOPCODE),t.headerValue.push(t.data[$T.httpConfig.HOPCODE]),null!=t.token&&(t.headerKey.push($T.httpConfig.TOKEN),t.headerValue.push(t.token)),null!=t.fileArray&&(null!=t.fileUuid&&(t.headerKey.push($T.httpConfig.FILE_UUID),t.headerValue.push(t.fileUuid)),t.headerKey.push($T.httpConfig.PACKET),t.headerValue.push(encodeURI(JSON.stringify(t.data))),t.headerKey.push($T.httpConfig.SEND_TYPE),null!=t.sendType?t.headerValue.push(t.sendType):t.headerValue.push($T.httpConfig.SEND_TYPE_FILE_SAVE_SESSION)),$T.httpUtilNormal.send(t)):alert("发送post请求，data[$T.httpConfig.HOPCODE]不能为空"):alert("发送post请求，data不能为空")},this.getRequestUrl=function(t){var e=encodeURI(JSON.stringify(t.data));return t.url+"?"+$T.httpConfig.HOPCODE+"="+t.data[$T.httpConfig.HOPCODE]+"&token="+t.token+"&sendType="+t.sendType+"&receiveType="+t.receiveType+"&packet="+e}}function ResourceEventType(){this.LOAD_COMPLETE="loadComplete"}function Loader(){this.url,this.resultArray=[],this.num=0,this.obj,this.Loader=function(t){this.url=t,EventDispatcher.apply(this)},this.load=function(){for(var t=0;t<this.url.length;t++){var e=new SendParamNormal;e.successHandle=this.loadSuccess,e.failHandle=this.loadFail,e.object=this,e.type=$T.httpConfig.TYPE_GET,e.url=this.url[t],e.returnType=$T.httpConfig.RETURN_TYPE_HTML,e.isStatic=!0,e.lockKey=this.url[t],$T.httpUtilNormal.send(e)}},this.loadSuccess=function(t,e){this.resultArray[e.url]=t,++this.num==this.url.length&&this.dispatchEventWith($T.resourceEventType.LOAD_COMPLETE)},this.loadFail=function(){}}function ResourceManager(){this.resource=[],this.loadResource=function(t,e){var i=new Loader;i.Loader(t),i.obj=e,i.addEventListener($T.resourceEventType.LOAD_COMPLETE,this.loadComplete,this),i.load()},this.loadComplete=function(t){t.mTarget.removeEventListener($T.resourceEventType.LOAD_COMPLETE,this.loadComplete);for(var e=0;e<t.mTarget.url.length;e++){var i=t.mTarget.url[e];this.resource[i]=t.mTarget.resultArray[i]}t.mTarget.obj.call(null,t.mTarget.url)},this.getResource=function(t){return this.resource[t]}}function Register(){this.register=function(t){return null==t.init?(alert("mediator没有init方法"),!1):null==t.dispose?(alert("mediator没有dispose方法"),!1):null==t.handleNotification?(alert("mediator没有handleNotification方法"),!1):null==t.listNotificationInterests?(alert("mediator没有listNotificationInterests数组"),!1):($T.viewManager.registerObserverArray(t.listNotificationInterests,t),void 0!=t.advanceTime&&$T.jugglerManager.fourJuggler.add(t),void(t.isInit=!0))},this.unRegister=function(t){$T.viewManager.removeObserverArray(t.listNotificationInterests,t),void 0!=t.advanceTime&&$T.jugglerManager.fourJuggler.remove(t),t.isInit=!1}}function ModuleData(){this.view,this.type,this.mediator,this.data}function ModuleManager(){this.moduleUrlToData=[],this.moduleTypeToData=[],this.loadModule=function(t,e,i,s,n){var r=new ModuleData;r.view=e,r.type=i,r.mediator=s,r.data=n,this.moduleUrlToData[t]=r,$T.resourceManager.loadResource([t],this.loadComplete)},this.loadComplete=function(t){var e=$T.moduleManager.moduleUrlToData[t[0]];if(null!=e){var i=$T.resourceManager.getResource(t[0]);if(null!=e.type){var s=$T.moduleManager.moduleTypeToData[e.type];null!=s&&($T.register.unRegister(s.mediator),s.mediator.dispose()),$T.moduleManager.moduleTypeToData[e.type]=e}e.view.innerHTML=i,e.mediator.init(e.view,e.data),$T.register.register(e.mediator),$T.viewManager.notifyObservers($T.viewManager.getNotification($T.notification.MODULE_INIT_COMPLETE,t))}},this.unLoadModule=function(t){var e=this.moduleUrlToData[t];null!=e&&(e.mediator.isInit&&($T.register.unRegister(e.mediator),e.mediator.dispose()),delete this.moduleUrlToData[t],delete this.moduleTypeToData[e.type])}}function WebSocketConfig(){this.WSOPCODE="wsOpCode"}function WebSocketEventType(){this.CONNECTED="connected",this.CLOSE="close",this.MESSAGE="message",this.getMessage=function(t){return this.MESSAGE+"_"+t}}function WebSocketClient(){this.webSocket,this.isConnected=!1,this.url,this.WebSocketClient=function(t){this.url=t,this.connect(),EventDispatcher.apply(this)},this.connect=function(){this.webSocket=new WebSocket(this.url),this.onOpenListener(this,this.onOpen),this.onCloseListener(this,this.onClose),this.onErrorListener(this,this.onError),this.onMessageListener(this,this.onMessage)},this.onOpenListener=function(t,e){t.webSocket.onopen=function(i){e.call(t,i)}},this.onCloseListener=function(t,e){t.webSocket.onclose=function(i){e.call(t,i)}},this.onErrorListener=function(t,e){t.webSocket.onerror=function(i){e.call(t,i)}},this.onMessageListener=function(t,e){t.webSocket.onmessage=function(i){e.call(t,i)}},this.onOpen=function(t){this.isConnected=!0,this.dispatchEventWith($T.webSocketEventType.CONNECTED)},this.send=function(t){if(this.isConnected){var e=new Blob([JSON.stringify(t)]);this.webSocket.send(e)}else alert("未链接至websocket服务器")},this.onMessage=function(event){var data=eval("("+event.data+")");null!=data[$T.webSocketConfig.WSOPCODE]&&this.dispatchEventWith($T.webSocketEventType.getMessage(data[$T.webSocketConfig.WSOPCODE]),!1,data)},this.onClose=function(t){this.isConnected=!1,this.dispatchEventWith($T.webSocketEventType.CLOSE)},this.onError=function(t){},this.close=function(){this.webSocket.close()}}var $T=new Global;$T.notification=new Notification,$T.viewManager=new ViewManager,$T.httpConfigNormal=new HttpConfigNormal,$T.httpConfig=new HttpConfig,$T.httpResultFilter=new HttpResultFilter,$T.arrayTools=new ArrayTools,$T.eventPool=new EventPool,$T.sBubbleChains=new Array,$T.functionMapping=new Array,$T.tweenEventType=new TweenEventType,$T.delayedCallPool=new DelayedCallPool,$T.transitions=new Transitions,$T.tweenPool=new TweenPool,$T.jugglerManager=new JugglerManager,$T.version=new Version,$T.httpUtilNormal=new HttpUtilNormal,$T.httpUtil=new HttpUtil,$T.resourceEventType=new ResourceEventType,$T.resourceManager=new ResourceManager,$T.register=new Register,$T.moduleManager=new ModuleManager,$T.webSocketConfig=new WebSocketConfig,$T.webSocketEventType=new WebSocketEventType;